(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7482],{7482:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ProfilePageModule:()=>Z});var s=i(8583),r=i(665),n=i(3083),o=i(4433),a=i(3318),c=i(4762),u=i(639),l=i(3071),g=i(5970);const m=["chart"],h=[{path:"",component:(()=>{class t{constructor(t,e,i){this.router=t,this.userService=e,this.alertService=i,this.Payment=[],this.Date=[],this.currentYear="2021"}ngOnInit(){this.getCustomer(),this.getGraphData(),this.getCurrentYear(),this.Chart(),this.Data()}getCustomer(){this.customer=JSON.parse(this.userService.getCustomerFromStorage()),this.last_visit=this.customer.last_visit,this.service=this.customer.service,this.payment=this.customer.payment}update(){this.last_visit.toString().split("-")[1]===this.customer.last_visit.split("-")[1]?this.userService.editProfile(this.customer.customer_data_id,this.customer.customer_id,this.service,this.payment,this.last_visit).subscribe(t=>(0,c.mG)(this,void 0,void 0,function*(){yield this.alertService.presentToast(t.msg,"success"),yield this.userService.addCusomerToStorage(JSON.stringify(t.customer))})):this.userService.updateProfile(this.customer.customer_id,this.service,this.payment,this.last_visit).subscribe(t=>(0,c.mG)(this,void 0,void 0,function*(){this.alertService.presentToast(t.msg,"success"),this.userService.addCusomerToStorage(JSON.stringify(t.customer))}))}getCurrentYear(){let t=new Date;this.currentYear=String(t.getFullYear())}getGraphData(){return(0,c.mG)(this,void 0,void 0,function*(){yield this.userService.getGraphData(this.customer.customer_id).subscribe(t=>{t.Payment.forEach(t=>{this.Payment.push(t)}),t.Date.forEach(t=>{this.Date.push(t)})})})}Data(){let t=0;for(t=0;t<this.Date.length;t++)console.log("Hello");return[]}Chart(){this.chartOptions={series:[{data:this.Payment}],chart:{height:360,type:"line",zoom:{enabled:!1},toolbar:{show:!1}},stroke:{curve:"smooth"},markers:{size:6,hover:{size:10}},fill:{colors:["#00E396"],opacity:.8},tooltip:{followCursor:!1,theme:"dark",marker:{show:!1},x:{show:!1},y:{title:{formatter:function(){return"\u20b9"}}}},xaxis:{title:{text:"Year "+this.currentYear},categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},yaxis:{title:{text:"Money Spend"},labels:{minWidth:10},min:0,max:2e3,tickAmount:6}}}ngOnDestroy(){this.userService.remove("customer")}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(a.F0),u.Y36(l.K),u.Y36(g.c))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-profile"]],viewQuery:function(t,e){if(1&t&&u.Gf(m,5),2&t){let t;u.iGM(t=u.CRH())&&(e.chart=t.first)}},decls:55,vars:21,consts:[["slot","start"],[1,"grid"],[3,"src"],[1,"wrapper"],["type","date","name","last_visit",3,"value","ngModel","ngModelChange"],["name","pencil-outline"],["type","text","name","service",3,"value","ngModel","ngModelChange"],["type","number","name","payment",3,"value","ngModel","ngModelChange"],["slot","end",3,"click"],[3,"series","chart","xaxis","yaxis","stroke","markers","tooltip","fill"]],template:function(t,e){1&t&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-buttons",0),u._UZ(3,"ion-back-button"),u.qZA(),u.TgZ(4,"ion-title"),u._uU(5),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"ion-content"),u.TgZ(7,"ion-card"),u.TgZ(8,"ion-card-content"),u.TgZ(9,"div",1),u.TgZ(10,"div"),u.TgZ(11,"ion-card"),u.TgZ(12,"ion-card-content"),u._UZ(13,"img",2),u.qZA(),u.qZA(),u.qZA(),u.TgZ(14,"div",3),u.TgZ(15,"ion-item"),u.TgZ(16,"ion-label"),u._uU(17,"First Name:"),u.qZA(),u.TgZ(18,"ion-label"),u._uU(19),u.qZA(),u.qZA(),u.TgZ(20,"ion-item"),u.TgZ(21,"ion-label"),u._uU(22,"Last Name:"),u.qZA(),u.TgZ(23,"ion-label"),u._uU(24),u.qZA(),u.qZA(),u.TgZ(25,"ion-item"),u.TgZ(26,"ion-label"),u._uU(27,"Last Visit:"),u.qZA(),u.TgZ(28,"ion-input",4),u.NdJ("ngModelChange",function(t){return e.last_visit=t}),u.qZA(),u._UZ(29,"ion-icon",5),u.qZA(),u.TgZ(30,"ion-item"),u.TgZ(31,"ion-label"),u._uU(32,"Service:"),u.qZA(),u.TgZ(33,"ion-input",6),u.NdJ("ngModelChange",function(t){return e.service=t}),u.qZA(),u._UZ(34,"ion-icon",5),u.qZA(),u.TgZ(35,"ion-item"),u.TgZ(36,"ion-label"),u._uU(37,"Payment Status:"),u.qZA(),u.TgZ(38,"ion-input",7),u.NdJ("ngModelChange",function(t){return e.payment=t}),u.qZA(),u._UZ(39,"ion-icon",5),u.qZA(),u.TgZ(40,"ion-item"),u.TgZ(41,"ion-label"),u._uU(42,"Important Dates:"),u.qZA(),u.TgZ(43,"ion-label"),u._uU(44),u.qZA(),u.qZA(),u.TgZ(45,"ion-button",8),u.NdJ("click",function(){return e.update()}),u._uU(46,"Update"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(47,"ion-item"),u.TgZ(48,"ion-label"),u._uU(49,"About Customer"),u.qZA(),u.TgZ(50,"ion-label"),u._uU(51),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(52,"ion-card"),u.TgZ(53,"ion-card-content"),u._UZ(54,"apx-chart",9),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(5),u.AsE("",e.customer.first_name," ",e.customer.last_name,""),u.xp6(8),u.Q6J("src","data:image/png;base64,"+e.customer.image_name,u.LSH),u.xp6(6),u.Oqu(e.customer.first_name),u.xp6(5),u.Oqu(e.customer.last_name),u.xp6(4),u.s9C("value",e.customer.last_visit),u.Q6J("ngModel",e.last_visit),u.xp6(5),u.s9C("value",e.customer.service),u.Q6J("ngModel",e.service),u.xp6(5),u.s9C("value",e.customer.payment),u.Q6J("ngModel",e.payment),u.xp6(6),u.Oqu(e.customer.anniversary),u.xp6(7),u.Oqu(e.customer.message),u.xp6(3),u.Q6J("series",e.chartOptions.series)("chart",e.chartOptions.chart)("xaxis",e.chartOptions.xaxis)("yaxis",e.chartOptions.yaxis)("stroke",e.chartOptions.stroke)("markers",e.chartOptions.markers)("tooltip",e.chartOptions.tooltip)("fill",e.chartOptions.fill))},directives:[n.Gu,n.sr,n.Sm,n.oU,n.cs,n.wd,n.W2,n.PM,n.FN,n.Ie,n.Q$,n.pK,n.j9,r.JJ,r.On,n.gu,n.as,n.YG,o.x],styles:[".grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:.5fr 1fr}.grid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background-position:50%;background-size:cover}.grid[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{text-align:center}"]}),t})()}];let p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[a.Bz.forChild(h)],a.Bz]}),t})(),Z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[s.ez,r.u5,n.Pc,p,o.X]]}),t})()}}]);